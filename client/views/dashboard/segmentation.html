<template name="dashboard_segment_manage">
{{log counts}}
{{> dashboard_collection_manage context="segments" count=counts listItems=segments modalContent=modal }}
</template>

<template name="dashboard_segment_create">
{{#Layout template="collection_manage" data=transform }}
{{log this}} {{log ..}}
  {{#contentFor region="view-header"}}
    <div class="col-sm-9"><h3>Creating: {{newItemName}}</h3></div>
    <div class="col-sm-3"><div class="actions pull-right"><button class="create-btn action-btn btn btn-primary">Create {{context}}</button></div></div>
  {{/contentFor}}
  <section>
  {{#with criteriaInputs companyId}}
  Includes anyone who have {{> _field hasBeen }} to {{> _field to }} of these {{> _field triggerLocations }}:

  for {{> _field times }} times and stayed for {{> _field durantionInMinutes }} minutes

  in {{> _field days }} 60 days every {{>_field every }} only
  {{/with}}
  </section>
{{/Layout}}
</template>

<template name="_field">
{{log this}}
{{#if isDefault}}
<span class="form-label">{{this.field}}</span>
{{/if}}

{{#if isList }}
<select>
  {{#each decompose}}
  <option value="{{key}}">{{val}}</option>
  {{/each}}
</select>
{{/if}}


{{#if equals this.type "filterInput" }}
  <select>
  {{#each filter}}
    <option value="{{this}}" data-filter="{{this}}">{{obtain ../filterLabel this}}</option>
  {{/each}}
  </select>
  {{#each filter}}
    {{#with obtain ../style this}}
      {{#if equals this "Number"}}
      <input type="text" value="" placeholder="" size="2" data-filter-toggle="{{..}}">
      {{/if}}

      {{#if equals this "DatetimeRange"}}
      <span class="input-daterange input-group" id="datepicker-{{..}}"  data-filter-toggle="{{..}}">
          <input type="text" class="input-xs form-control" name="start" />
          <span class="input-group-addon"> - </span>
          <input type="text" class="input-xs form-control" name="end" />
      </span>
      {{/if}}
    {{/with}}
  {{/each}}
{{/if}}
</template>