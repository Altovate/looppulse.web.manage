<template name="dashboard_segment_manage">
{{log counts}}
{{> dashboard_collection_manage context="segments" count=counts listItems=segments modalContent=modal }}
</template>

<template name="dashboard_segment_create">
{{#Layout template="collection_manage" data=transform }}
{{log this}} {{log ..}}
  {{#contentFor region="view-header"}}
    <div class="col-sm-9"><h3>Creating: {{newItemName}}</h3></div>
    <div class="col-sm-3"><div class="actions pull-right"><button class="create-btn action-btn btn btn-primary">Create {{context}}</button></div></div>
  {{/contentFor}}
  <section>
  <form class="form-inline rule-form" role="form">
  {{#with criteriaInputs companyId}}
  Includes anyone who have {{> _field hasBeen }} to {{> _field to }} of these {{> _field triggerPoints }}{{> _field triggerLocations }}:

  for {{> _field times }} times and stayed for {{> _field durantionInMinutes }} minutes

  in {{> _field days }} days every {{>_field every }} only
  {{/with}}
  </form>
  </section>
{{/Layout}}
</template>

<template name="_field">
{{#if isDefault}}
<span class="form-label">{{field}}</span>
{{/if}}

{{#if equals this.type "list" }}
<div class="form-list form-group" data-key="{{field}}">
  <select class="select-picker span2" title="{{placeholder}}" multiple={{isMultiple}}>
    {{#each decompose this.values}}
    <option value="{{val}}">{{key}}</option>
    {{/each}}
  </select>
</div>
{{/if}}

{{#if equals this.type "filterList" }}

<div class="filter-group filter-list form-group" data-key="{{field}}">
  <select class="select-picker span2 select-filter" data-key="{{field}}"  data-filter-type="select" multiple={{isMultiple}}>
    {{#each filters}}
    <option value="{{key}}" data-filter-toggle="{{this.key}}" selected={{isSelected}}>{{label}}</option>
    {{/each}}
  </select>

  {{#each filters}}
        {{#if equals this.style "MultiSelect"}}
        <select class="select-picker span2 filter-input-group data-group-{{../field}} data-input-{{this.key}}" data-filter="{{this.key}}" data-key="{{../field}}" title="{{this.placeholder}}" multiple>
          {{#each decompose this.values}}
          <option value="{{val}}">{{key}}</option>
          {{/each}}
        </select>
        {{/if}}

  {{/each}}
</div>
{{/if}}

{{#if equals this.type "filterInput" }}
<div class="filter-group filter-input form-group" data-key="{{field}}">
  <select class="select-picker span2 select-filter" data-key="{{field}}">
  {{#each filters}}
    <option value="{{this.key}}" data-filter-toggle="{{this.key}}" selected={{isSelected}}>{{this.label}}</option>
  {{/each}}
  </select>
  {{#each filters}}
      {{#if equals this.style "Number"}}
      <input type="text" value="" class="filter-input-group input-md form-control" placeholder="{{this.placeholder}}" size="2" data-filter="{{this.key}}"  data-key="{{../field}}">
      {{/if}}

      {{#if equals this.style "DatetimeRange"}}
      <span class="input-daterange filter-input-group input-group" id="datepicker-{{this.key}}"  data-filter="{{this.key}}" data-key="{{../field}}">
          <input type="text" class="input-md form-control" name="{{this.field.start}}" data-key="{{../field}}" />
          <span class="input-group-addon"> - </span>
          <input type="text" class="input-md form-control" name="{{this.field.end}}" data-key="{{../field}}" />
      </span>
      {{/if}}
  {{/each}}
</div>
{{/if}}
</template>